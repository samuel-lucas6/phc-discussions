phc-discussions - Re: [PHC] Low Argon2 performance in L3 cache

Message-ID: <CAOLP8p6Y+mw5C3nB270uKJXSvWZ82nCbiij_WDBQz_00j4s=Tw@mail.gmail.com>
Date: Sat, 5 Sep 2015 13:59:37 -0700
From: Bill Cox <waywardgeek@...il.com>
To: "discussions@...sword-hashing.net" <discussions@...sword-hashing.net>
Subject: Re: [PHC] Low Argon2 performance in L3 cache

On Sat, Sep 5, 2015 at 6:40 AM, Solar Designer <solar@...nwall.comwrote:

On Sat, Sep 05, 2015 at 05:07:39AM -0700, Bill Cox wrote:
On Fri, Sep 4, 2015 at 5:11 PM, Solar Designer <solar@...nwall.com>
wrote:
What is it that makes Argon2d so much slower?  Is it needing to perform
two BLAKE2b rounds per sub-block, and the intermediate writes to state?
>
Mostly 2 things: Too many Blake2 rounds, and having state that does not
fit
into the mmx registers.  Cutting the Blake2 rounds in half looks fairly
simple, but I don't know what to do about the state variables.
>
To me, the sequence of two groups of BLAKE2b rounds and thus needing the
intermediate state is an integral part of Argon2's anti-TMTO approach.
Yes, you don't agree those time*depth attacks are important, yet Argon2's
resistance to them is one of its strong sides.
>
So I don't see a simple way to halve the number of rounds, or it would
be a very different scheme.
>

I agree.  Yescrypt is a "recommended" solution, so for this 4MiB hash size,
I think I should see if I can get the speed where it needs to be for me to
argue easily for it's use.  As I recall, there were several possible tweaks
to get it running essentially on par with TwoCat's speed, which
unfortunately I need to make a simple argument.

Is Yescrypt essentially finished?  What would you recommend I try to get a
a single-thread hash of 4MiB under 1ms?

Thanks,
Bill



