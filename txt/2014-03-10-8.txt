phc-discussions - Re: [PHC] Upgrade HKDF to HKDF2?

Message-ID: <CAOLP8p677a3js5xr4QTmv_hwYzmDAZoMRuv=FnC406Rn2GsFiw@mail.gmail.com>
Date: Mon, 10 Mar 2014 07:36:51 -0400
From: Bill Cox <waywardgeek@...il.com>
To: discussions@...sword-hashing.net
Subject: Re: [PHC] Upgrade HKDF to HKDF2?

On Mon, Mar 10, 2014 at 5:38 AM,  <Stefan.Lucks@...-weimar.dewrote:
On Sun, 9 Mar 2014, Bill Cox wrote:
>
>for(i = 0; i < passwordLength; i += 256) {
>   for(j = 0; j < 256; j++) {
>       buf[i] = password[(i + j) % passwordLength];
>   }
>   Hash_Update(hashCtx, buf, 256);
>}
>
>
Welcome password collisions!
>
Consider, e.g., passwords such as "abcd", "abcdabcd", "abcdabcdabcd" ...
>
Stefan

That's why PBKDF2 hash has collisions for this reason, but I'm
prepending all lengths with an extra Update call before adding padded
data.  This should eliminate the collision problem, shouldn't it?

Bill

