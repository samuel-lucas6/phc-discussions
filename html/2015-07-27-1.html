<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">
body { font-size: 16px; }
.cal_brief { text-align: center; }
.cal_brief td:first-child { background: inherit; }
.cal_brief td { background: #ccc; width: 5ex; padding: 2px; }
.cal_big { text-align: center; padding: 0; margin: 0; }
.cal_big td { padding: 0 2px; }
.cal_mon { text-align: center; }
.cal_mon th { font-size: small; padding: 0; margin: 0; }
.cal_mon td { background: #ccc; width: 5ex; height: 1.5em;
	padding: 2px; text-align: right; }
.cal_mon td[colspan] { background: inherit; }
.cal_mon sup { color: #F0F0F0; text-align: left; float: left;
	margin-top: -2pt; font-weight: bold; }
.cal_mon a { text-align: right; margin-left: -4em; float: right; }
</style>

<title>phc-discussions - Re: [PHC] Argon2 improvement thread</title>


</head>

<BODY bgcolor="#E0E0E0" text="black" link="blue" alink="red" vlink="navy">



<TABLE bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="39%">
<A HREF="http://lists.openwall.net">lists.openwall.net</A>
<TD width="1%" rowspan="3">&nbsp;
<TD width="60%" align="right" rowspan="3">
<A HREF="/">lists</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/announce/">announce</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-users/">owl-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-dev/">owl-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-users/">john-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-dev/">john-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwdqc-users/">passwdqc-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/yescrypt/">yescrypt</A>&nbsp;
<A HREF="http://www.openwall.com/lists/popa3d-users/">popa3d-users</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/oss-security/">oss-security</A>&nbsp;
<A HREF="http://www.openwall.com/lists/kernel-hardening/">kernel-hardening</A>&nbsp;
<A HREF="http://www.openwall.com/lists/musl/">musl</A>&nbsp;
<A HREF="http://www.openwall.com/lists/sabotage/">sabotage</A>&nbsp;
<A HREF="http://www.openwall.com/lists/tlsify/">tlsify</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwords/">passwords</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/crypt-dev/">crypt-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/xvendor/">xvendor</A>&nbsp;
/&nbsp;
<A HREF="/bugtraq/">Bugtraq</A>&nbsp;
<A HREF="/full-disclosure/">Full-Disclosure</A>&nbsp;
<A HREF="/linux-kernel/">linux-kernel</A>&nbsp;
linux-<A HREF="/netdev/">netdev</A>&nbsp;
<A HREF="/linux-ext4/">linux-ext4</A>&nbsp;
<a href="/linux-hardening/">linux-hardening</a>&nbsp;
<a href="/linux-cve-announce/">linux-cve-announce</a>&nbsp;
<a href="/phc-discussions/">PHC</a>&nbsp;
<TR><TD>
<DIV><FONT SIZE="-2"><I>Open Source and information security mailing list archives</I></FONT></DIV>
<TR><TD>&nbsp;
</TABLE>

<TABLE bgcolor="#B4D0DC" width="100%" border="0" cellspacing="0" cellpadding="1">
<TR><TD>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2">
<TR><TD bgcolor="#ECF8FF">

<a href="https://hashsuite.openwall.net/android">
Hash Suite for Android: free password hash cracker in your pocket</a>


</TABLE>
</TABLE>


<a href="../../../2015/07/26/3">[&lt;prev]</a> <a href="2">[next&gt;]</a> <a href="../../../2015/07/26/2">[&lt;thread-prev]</a> <a href="4">[thread-next&gt;]</a> <a href=".">[day]</a> <a href="..">[month]</a> <a href="../..">[year]</a> <a href="../../..">[list]</a>
<pre style="white-space: pre-wrap">
Message-ID: &lt;CAGiyFdduTzC3rviSac-HNeyrhcFcHDD5KHwbefQAdux1xce0Qg&#64;mail.gmail.com&gt;
Date: Mon, 27 Jul 2015 15:39:12 +0000
From: Jean-Philippe Aumasson &lt;jeanphilippe.aumasson&#64;...il.com&gt;
To: discussions&#64;...sword-hashing.net
Subject: Re: [PHC] Argon2 improvement thread

Dmitry, Alex: what about writing a MAXFORM patch for Argon2 and measure
things? or can we decide without?

Dmitry: ok for a single API with different flags for 2d and 2i? (if so,
we'll update
<a href="https://docs.google.com/document/d/1AHAZaA6yU8xFXA1bBoqKTbgWiY0jItNnkXV2cR9_Bcg/edit?usp=sharing" rel="nofollow">https://docs.google.com/document/d/1AHAZaA6yU8xFXA1bBoqKTbgWiY0jItNnkXV2cR9_Bcg/edit?usp=sharing</a>
)



On Sun, Jul 26, 2015 at 4:27 AM Solar Designer &lt;solar&#64;...nwall.com&gt; wrote:

&gt; On Tue, Jul 21, 2015 at 12:50:52PM -0700, Bill Cox wrote:
&gt; &gt; On Tue, Jul 21, 2015 at 12:45 PM, Solar Designer &lt;solar&#64;...nwall.com&gt;
&gt; wrote:
&gt; &gt; &gt; MAXFORM is the scalar equivalent to (and subset of) pwxform.  It's
&gt; &gt; &gt; neither parallel, nor wide, but is otherwise the same.
&gt; &gt; &gt;
&gt; &gt; &gt; It would co-exist with Argon2's existing SIMD code.
&gt; &gt;
&gt; &gt; Nice!  I was getting excellent multiplication-chain hardening with a
&gt; &gt; similar approach.  The scalar pipeline has a faster multiplier.
&gt;
&gt; Actually, which multiplier is faster varies by CPU type and mode.
&gt; In x86-64 builds, the scalar code may have to use 64x64-&gt;64 when it
&gt; actually only needs 32x32-&gt;64, and this may be an extra clock cycle.
&gt;
&gt; Per my notes, SIMD 32x32-&gt;64 is 3 to 5 cycles, and scalar 32x32-&gt;64
&gt; where available is also 3 to 5 cycles, but the 64x64-&gt;64 is 3 to 6
&gt; cycles.  That's across what I deemed are currently relevant x86(-64) CPUs.
&gt;
&gt; But yes, on many recent x86-64 CPUs scalar is faster (like 3 or 4
&gt; cycles) and SIMD is slower (like 5 cycles).  On some older ones (but
&gt; still relevant), it's the other way around.
&gt;
&gt; &gt; &gt; Switching Argon2 to use pwxform would be too much of a change - not
&gt; &gt; &gt; code-wise, but design-wise.  If we were to do that, then it'd be better
&gt; &gt; &gt; to go with (simplified) yescrypt or the like instead, which we already
&gt; &gt; &gt; have separately (just not as the PHC winner).
&gt; &gt; &gt;
&gt; &gt; &gt; Alexander
&gt; &gt;
&gt; &gt; Got it.  In that case, I'm for the MAXFORM upgrade.  I agree that
&gt; &gt; Bcrypt-like GPU resistance is a critical defense.  For example, without
&gt; it,
&gt; &gt; I would have to use Yescrypt in the PoW systems I've been playing with
&gt; &gt; rather than Argon2.  With MAXFORM, would Argon2's GPU resistance be as
&gt; &gt; strong as Yescrypt's?
&gt;
&gt; The short answer is: not exactly as strong (with differences possible in
&gt; either direction), but similar.
&gt;
&gt; Agnieszka's latest benchmarks of yescrypt on GPU, along with the bcrypt
&gt; on GPU benchmarks we had before, help me answer this more precisely.
&gt;
&gt; As can be seen from Agnieszka's benchmarks, the current pwxform default
&gt; of 128-bit lookups vs. bcrypt's 32-bit ones appears to have actually hurt
&gt; performance 4x-ish on AMD GCN GPUs, compared to bcrypt's (which runs at
&gt; CPU-like speed on those GPUs).  This is consistent with my understanding
&gt; of GCN's local memory ports (lots of 32-bit wide ports, so when we make
&gt; wider lookups, we use multiple ports at once).  However, this didn't
&gt; make much of a difference on NVIDIA Kepler GPUs (bcrypt runs at similar
&gt; poor speed on those that we're getting for yescrypt now).  For NVIDIA
&gt; Maxwell, I am not ready to answer - Agnieszka's Maxwell GPU is small,
&gt; and I don't readily have bcrypt speed numbers for it.
&gt;
&gt; With MAXFORM, the lookups will be 64-bit, which is in-between.
&gt;
&gt; At the same time, the parallelism will be lower (in yescrypt, we
&gt; currently have 4 parallel 128-bit lanes, resulting in a total of 4x2 = 8
&gt; parallel S-box lookups, whereas in MAXFORM it's just one chain with 2
&gt; parallel S-box lookups).  The effect of this will probably vary across
&gt; GPU types and attack implementations.  On one hand, this may allow us to
&gt; increase the latency hardening compared to yescrypt's (use more MAXFORM
&gt; rounds than yescrypt would use pwxform rounds), although it looks like
&gt; we're not going to (on the contrary, we may prefer to minimize the
&gt; overhead of having MAXFORM chain added).  On the other hand, this means
&gt; less competition for access ports to whatever memory stores the S-boxes
&gt; in an attacker's device such as a GPU.
&gt;
&gt; The lower parallelism will definitely help harden defensive
&gt; implementations on older and smaller CPUs, as well as scalar builds
&gt; (where the Blake2b is also using scalar code) even when running on
&gt; recent SIMD-capable CPUs.  This is actually a concern I have about
&gt; yescrypt's current pwxform settings: they're worse than bcrypt when
&gt; faced with those SIMD-less CPUs/builds.  MAXFORM (or obviously tuning
&gt; yescrypt's pwxform like it) addresses this.  Argon2 with MAXFORM will
&gt; have this concern addressed all the time...  OK, that's not exactly
&gt; true: setting the MAXFORM rounds count low in order to expose Argon2's
&gt; parallelism has roughly the same effect as setting yescrypt's PWXsimple
&gt; and PWXgather high in order to have the parallelism.  So it's similar.
&gt;
&gt; Alexander
&gt;

<span style="font-family: times;"><strong>Content of type "</strong>text/html<strong>" skipped</strong></span>
</pre>
<p><a href="https://www.openwall.com/blists/">Powered by blists</a> - <a href="https://lists.openwall.net">more mailing lists</a>


<p>




</body>
</html>
