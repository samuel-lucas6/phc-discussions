<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">
body { font-size: 16px; }
.cal_brief { text-align: center; }
.cal_brief td:first-child { background: inherit; }
.cal_brief td { background: #ccc; width: 5ex; padding: 2px; }
.cal_big { text-align: center; padding: 0; margin: 0; }
.cal_big td { padding: 0 2px; }
.cal_mon { text-align: center; }
.cal_mon th { font-size: small; padding: 0; margin: 0; }
.cal_mon td { background: #ccc; width: 5ex; height: 1.5em;
	padding: 2px; text-align: right; }
.cal_mon td[colspan] { background: inherit; }
.cal_mon sup { color: #F0F0F0; text-align: left; float: left;
	margin-top: -2pt; font-weight: bold; }
.cal_mon a { text-align: right; margin-left: -4em; float: right; }
</style>

<title>phc-discussions - Re: [PHC] POMELO v2</title>


</head>

<BODY bgcolor="#E0E0E0" text="black" link="blue" alink="red" vlink="navy">



<TABLE bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="39%">
<A HREF="http://lists.openwall.net">lists.openwall.net</A>
<TD width="1%" rowspan="3">&nbsp;
<TD width="60%" align="right" rowspan="3">
<A HREF="/">lists</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/announce/">announce</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-users/">owl-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-dev/">owl-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-users/">john-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-dev/">john-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwdqc-users/">passwdqc-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/yescrypt/">yescrypt</A>&nbsp;
<A HREF="http://www.openwall.com/lists/popa3d-users/">popa3d-users</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/oss-security/">oss-security</A>&nbsp;
<A HREF="http://www.openwall.com/lists/kernel-hardening/">kernel-hardening</A>&nbsp;
<A HREF="http://www.openwall.com/lists/musl/">musl</A>&nbsp;
<A HREF="http://www.openwall.com/lists/sabotage/">sabotage</A>&nbsp;
<A HREF="http://www.openwall.com/lists/tlsify/">tlsify</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwords/">passwords</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/crypt-dev/">crypt-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/xvendor/">xvendor</A>&nbsp;
/&nbsp;
<A HREF="/bugtraq/">Bugtraq</A>&nbsp;
<A HREF="/full-disclosure/">Full-Disclosure</A>&nbsp;
<A HREF="/linux-kernel/">linux-kernel</A>&nbsp;
linux-<A HREF="/netdev/">netdev</A>&nbsp;
<A HREF="/linux-ext4/">linux-ext4</A>&nbsp;
<a href="/linux-hardening/">linux-hardening</a>&nbsp;
<a href="/linux-cve-announce/">linux-cve-announce</a>&nbsp;
<a href="/phc-discussions/">PHC</a>&nbsp;
<TR><TD>
<DIV><FONT SIZE="-2"><I>Open Source and information security mailing list archives</I></FONT></DIV>
<TR><TD>&nbsp;
</TABLE>

<TABLE bgcolor="#B4D0DC" width="100%" border="0" cellspacing="0" cellpadding="1">
<TR><TD>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2">
<TR><TD bgcolor="#ECF8FF">

<a href="https://hashsuite.openwall.net/android">
Hash Suite for Android: free password hash cracker in your pocket</a>


</TABLE>
</TABLE>


<a href="4">[&lt;prev]</a> <a href="../../../2015/04/16/1">[next&gt;]</a> <a href="../../../2015/03/30/4">[&lt;thread-prev]</a> <a href=".">[day]</a> <a href="..">[month]</a> <a href="../..">[year]</a> <a href="../../..">[list]</a>
<pre style="white-space: pre-wrap">
Message-ID: &lt;CAELGc4X-FuHF+AzOrP8eeQv=7xA_ahU6u3QT7mdoS+g8ZKGyzA&#64;mail.gmail.com&gt;
Date: Thu, 16 Apr 2015 01:13:59 +0800
From: Hongjun Wu &lt;wuhongjun&#64;...il.com&gt;
To: discussions&#64;...sword-hashing.net
Cc: Agnieszka Bielec &lt;bielecagnieszka8&#64;...il.com&gt;
Subject: Re: [PHC] POMELO v2

Dear Axel,

Thank you very much for the comments!

You are right.  There is a typo in the comments in the POMELO v2 codes.
In the POMELO v2, the salt size is 64 bytes.

Best Regards,
hongjun

On Mon, Mar 30, 2015 at 7:06 PM, Solar Designer &lt;solar&#64;...nwall.com&gt; wrote:

&gt; Hi,
&gt;
&gt; Agnieszka, one of our prospective GSoC students (CC'ed on this message)
&gt; is currently working to add support for PHC finalists into JtR -jumbo,
&gt; including OpenCL implementations.  She already has an initial
&gt; implementation of POMELO v2 in OpenCL, ported from the reference C code.
&gt; While this is just an initial hack, I thought I'd let this list know.
&gt; Discussion is currently in progress on the john-dev mailing list.
&gt;
&gt; While at it, Agnieszka pointed out this inconsistency in the POMELO v2
&gt; reference code:
&gt;
&gt;     //check the size of password, salt and output. Password is at most 256
&gt; bytes; the salt is at most 32 bytes.
&gt;     if (inlen &gt; 256 || saltlen &gt; 64 || outlen &gt; 256 || inlen &lt; 0 ||
&gt; saltlen &lt; 0 || outlen &lt; 0) return 1;
&gt;
&gt; Note how the comment says "the salt is at most 32 bytes", but the check
&gt; is for "saltlen &gt; 64".  This inconsistency is present in pomelo_x64.c
&gt; and pomelo_sse2.c, but not in pomelo_avx2.c (which says 64 in both the
&gt; comment and the code).  Which is right?
&gt;
&gt; Some other observations on POMELO v2:
&gt;
&gt; Unlike in v1, there's 256-bit SIMD parallelism in v2.  However, POMELO
&gt; v2 still tries to discourage use of even wider SIMD.
&gt;
&gt; The random table lookups are more frequent than v1's, maybe bringing in
&gt; some bcrypt-like GPU unfriendliness.  However, with the 256-bit SIMD
&gt; parallelism, non-SIMD defensive implementations (such as plain 64-bit
&gt; and especially 32-bit builds) are now at a disadvantage in this respect.
&gt; (It's the same tradeoff I faced in yescrypt, where it can be dealt with
&gt; by tuning pwxform settings.)
&gt;
&gt; The "&amp; mask" and subsequent S[] lookups can be made more efficient at no
&gt; security loss by redefining which bits are being masked and thus
&gt; pre-shifting the (constant for each invocation) mask by 5 (for 32-byte
&gt; S[] elements), thereby directly obtaining the byte offsets.  As it is,
&gt; POMELO v2 requires either indexed addressing (with the index being
&gt; implicitly shifted left by 5 by the CPU) or explicit extra shift
&gt; instructions, either of which (and especially the latter) may have
&gt; performance cost.  On x86, indexed access is only available for up to
&gt; 8-byte quantities, so we get explicit shift instructions in the
&gt; generated code.
&gt;
&gt; solar&#64;...l:~/pomelo/POMELO-v2/POMELO/pomelo_code_avx2$ objdump -d
&gt; pomelo_avx2.o | fgrep -c 'shl    $0x5,'
&gt; 24
&gt;
&gt; yescrypt includes the optimization I mentioned above (optimally
&gt; pre-shifted mask, to avoid these shifts).  Unfortunately, getting this
&gt; optimization into POMELO now would be a tweak (it affects which hashes
&gt; are computed, since different bits would be used for index).  If we
&gt; introduce a standardization &amp; tweaks-by-panel phase (which I think we
&gt; should) and POMELO is chosen as a winner, perhaps this is something we
&gt; should fix (in coordination with the author, indeed).
&gt;
&gt; Finally, in case some of us haven't noticed yet, POMELO v2 gives very
&gt; competitive speeds in its specification document - e.g., 1.1 seconds on
&gt; i7-4770K (when running one thread, I guess) for 1 GB.  This is on par
&gt; with Lyra2 and yescrypt.  I haven't run my own benchmarks yet, but if
&gt; this is true then POMELO v2 has moved from competing with Pufferfish
&gt; only (like POMELO v1 did before) to also competing with Lyra2 and
&gt; yescrypt (and continuing to compete with Pufferfish as well).  Nice!
&gt;
&gt; Alexander
&gt;

<span style="font-family: times;"><strong>Content of type "</strong>text/html<strong>" skipped</strong></span>
</pre>
<p><a href="https://www.openwall.com/blists/">Powered by blists</a> - <a href="https://lists.openwall.net">more mailing lists</a>


<p>




</body>
</html>
