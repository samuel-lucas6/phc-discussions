<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">
body { font-size: 16px; }
.cal_brief { text-align: center; }
.cal_brief td:first-child { background: inherit; }
.cal_brief td { background: #ccc; width: 5ex; padding: 2px; }
.cal_big { text-align: center; padding: 0; margin: 0; }
.cal_big td { padding: 0 2px; }
.cal_mon { text-align: center; }
.cal_mon th { font-size: small; padding: 0; margin: 0; }
.cal_mon td { background: #ccc; width: 5ex; height: 1.5em;
	padding: 2px; text-align: right; }
.cal_mon td[colspan] { background: inherit; }
.cal_mon sup { color: #F0F0F0; text-align: left; float: left;
	margin-top: -2pt; font-weight: bold; }
.cal_mon a { text-align: right; margin-left: -4em; float: right; }
</style>

<title>phc-discussions - Re: [PHC] A review per day - Lyra2</title>


</head>

<BODY bgcolor="#E0E0E0" text="black" link="blue" alink="red" vlink="navy">



<TABLE bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="39%">
<A HREF="http://lists.openwall.net">lists.openwall.net</A>
<TD width="1%" rowspan="3">&nbsp;
<TD width="60%" align="right" rowspan="3">
<A HREF="/">lists</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/announce/">announce</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-users/">owl-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-dev/">owl-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-users/">john-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-dev/">john-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwdqc-users/">passwdqc-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/yescrypt/">yescrypt</A>&nbsp;
<A HREF="http://www.openwall.com/lists/popa3d-users/">popa3d-users</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/oss-security/">oss-security</A>&nbsp;
<A HREF="http://www.openwall.com/lists/kernel-hardening/">kernel-hardening</A>&nbsp;
<A HREF="http://www.openwall.com/lists/musl/">musl</A>&nbsp;
<A HREF="http://www.openwall.com/lists/sabotage/">sabotage</A>&nbsp;
<A HREF="http://www.openwall.com/lists/tlsify/">tlsify</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwords/">passwords</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/crypt-dev/">crypt-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/xvendor/">xvendor</A>&nbsp;
/&nbsp;
<A HREF="/bugtraq/">Bugtraq</A>&nbsp;
<A HREF="/full-disclosure/">Full-Disclosure</A>&nbsp;
<A HREF="/linux-kernel/">linux-kernel</A>&nbsp;
linux-<A HREF="/netdev/">netdev</A>&nbsp;
<A HREF="/linux-ext4/">linux-ext4</A>&nbsp;
<a href="/linux-hardening/">linux-hardening</a>&nbsp;
<a href="/linux-cve-announce/">linux-cve-announce</a>&nbsp;
<a href="/phc-discussions/">PHC</a>&nbsp;
<TR><TD>
<DIV><FONT SIZE="-2"><I>Open Source and information security mailing list archives</I></FONT></DIV>
<TR><TD>&nbsp;
</TABLE>

<TABLE bgcolor="#B4D0DC" width="100%" border="0" cellspacing="0" cellpadding="1">
<TR><TD>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2">
<TR><TD bgcolor="#ECF8FF">

<a href="https://hashsuite.openwall.net/android">
Hash Suite for Android: free password hash cracker in your pocket</a>


</TABLE>
</TABLE>


<a href="4">[&lt;prev]</a> <a href="6">[next&gt;]</a> <a href="4">[&lt;thread-prev]</a> <a href="../../../2014/09/09/1">[thread-next&gt;]</a> <a href=".">[day]</a> <a href="..">[month]</a> <a href="../..">[year]</a> <a href="../../..">[list]</a>
<pre style="white-space: pre-wrap">
Message-ID: &lt;540DC6C7.3040202&#64;larc.usp.br&gt;
Date: Mon, 08 Sep 2014 12:09:59 -0300
From: Marcos Simplicio &lt;mjunior&#64;...c.usp.br&gt;
To: discussions&#64;...sword-hashing.net
Subject: Re: [PHC] A review per day - Lyra2


&gt;&gt;&gt; Lyra2 does small-ish unpredictable reads,
&gt; 
&gt;&gt; Where?  I am not seeing that.  I only see 3 nested loops: Time Loop
&gt;&gt; until T (corresponds to yescrypt's t), Visitation Loop for rows
&gt;&gt; (corresponds to (ye)scrypt SMix second loop), and Columns Loop
&gt;&gt; (corresponds to (ye)scrypt's BlockMix).  There's nothing that would
&gt;&gt; correspond to yescrypt's pwxform, as far as I can see. Setting C
&gt;&gt; low would be equivalent to setting scrypt's r low - that is, it
&gt;&gt; would bring things closer to a Pufferfish-alike, but not close
&gt;&gt; enough for this to make sense (so memory access would become slow,
&gt;&gt; but not much GPU defense would be achieved).
&gt; 
&gt; Whoa!  I totally missed that!  I did not re-read Lyra2's code well
&gt; enough this time.  I thought I remembered it well enough from last
&gt; Spring.  The loop for each row is a simple linear pass, with no small
&gt; random reads at all.
&gt; 
&gt; This is worse GPU defense than I thought.

On section 6.3, pages 36 and 37. If you looking at the reference code
only, then it is really not there (but maybe your memory came from the
documentation, not the code).


&gt; 
&gt;&gt;&gt; Lyra2 does at least two passes over memory, doing twice as many 
&gt;&gt;&gt; read/write operations per memory location.  This causes it to
&gt;&gt;&gt; use half the memory as TwoCats and Yescrypt when memory
&gt;&gt;&gt; bandwidth limited.  All of my ASIC attack plans so far would need
&gt;&gt;&gt; only half the memory to attack Lyra2 hashes, lowering it's
&gt;&gt;&gt; time*memory defense by 2X.  However, a more sophisticated attack
&gt;&gt;&gt; might be able to take advantage of the unfilled memory until it
&gt;&gt;&gt; is needed, lowering the time*memory penalty to only a 3/4ths of
&gt;&gt;&gt; TwoCats and Yescrypt.
&gt; 
&gt;&gt; For TwoCats, average usage is 1/2 of peak.  I guess you derive 3/4 
&gt;&gt; of TwoCats' for Lyra2 given that Lyra2's average is also naturally 
&gt;&gt; somewhat lower than its peak usage, just not to the same extent.
&gt; 
&gt;&gt; For yescrypt t=0 in native mode, average usage is 5/8 of peak.
&gt; 
&gt;&gt; Alexander
&gt; 
&gt; I went back and looked at Lyra2's memory access again.  With t_cost ==
&gt; 1 (minimum), it does a total of 9 passes, plus 1 for zeroing if not
&gt; running as an authentication server.  It fills to max memory while
&gt; doing 2 reads and 2 writes, and then does a pass with 3 reads and 2
&gt; writes.
&gt; 
&gt; In these benchmarks the zeroing counts, so both loops should run about
&gt; the same speed.  So, it fills for 1/2 the time, and then rehashes for
&gt; 1/2 the time.  It uses 1/2 the peak memory that it would if it just
&gt; kept on filling, but the average is 3/4ths as high as it would be if
&gt; it kept filling.
&gt; 
&gt; The real killer for Lyra2, in addition to poor small-memory GPU
&gt; defense, is the lack of any good mode for running with fewer memory
&gt; passes.  TwoCats runs with the fewest, and Yescrypt is only slightly
&gt; higher at min t_cost.  Overall, I think you made a better design, but
&gt; improved TMTO is not why.  I think your improved GPU defense is the
&gt; main improvement, followed by better authentication server support,
&gt; and then compatibility with Scrypt.  That, plus your code is less
&gt; buggy and closer to ready for prime time.  I still like my hybrid
&gt; architecture with cache-timing defense, though :-)

Well, that is also suggested on section 6.3, although the discussion is
biased toward raising the number of reads/writes rather than lowering it
(which would make it resemble more to the original Lyra)... For a
parallel version, though, it does make more sense to lower the number of
reads/writes (our benchmarks with two reads and writes do look terrible... )

Marcos.


<span style="font-family: times;"><strong>Download attachment "</strong><a href="5/1" rel="nofollow" download>signature.asc</a><strong>" of type "</strong>application/pgp-signature<strong>" (664 bytes)</strong></span>
</pre>
<p><a href="https://www.openwall.com/blists/">Powered by blists</a> - <a href="https://lists.openwall.net">more mailing lists</a>


<p>




</body>
</html>
