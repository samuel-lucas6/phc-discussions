<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">
body { font-size: 16px; }
.cal_brief { text-align: center; }
.cal_brief td:first-child { background: inherit; }
.cal_brief td { background: #ccc; width: 5ex; padding: 2px; }
.cal_big { text-align: center; padding: 0; margin: 0; }
.cal_big td { padding: 0 2px; }
.cal_mon { text-align: center; }
.cal_mon th { font-size: small; padding: 0; margin: 0; }
.cal_mon td { background: #ccc; width: 5ex; height: 1.5em;
	padding: 2px; text-align: right; }
.cal_mon td[colspan] { background: inherit; }
.cal_mon sup { color: #F0F0F0; text-align: left; float: left;
	margin-top: -2pt; font-weight: bold; }
.cal_mon a { text-align: right; margin-left: -4em; float: right; }
</style>

<title>phc-discussions - Re: [PHC] GPU benchmarks: Lyra2+yescrypt (was: Another PHC candidates "mechanical" tests (ROUND2))</title>


</head>

<BODY bgcolor="#E0E0E0" text="black" link="blue" alink="red" vlink="navy">



<TABLE bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="39%">
<A HREF="http://lists.openwall.net">lists.openwall.net</A>
<TD width="1%" rowspan="3">&nbsp;
<TD width="60%" align="right" rowspan="3">
<A HREF="/">lists</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/announce/">announce</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-users/">owl-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-dev/">owl-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-users/">john-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-dev/">john-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwdqc-users/">passwdqc-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/yescrypt/">yescrypt</A>&nbsp;
<A HREF="http://www.openwall.com/lists/popa3d-users/">popa3d-users</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/oss-security/">oss-security</A>&nbsp;
<A HREF="http://www.openwall.com/lists/kernel-hardening/">kernel-hardening</A>&nbsp;
<A HREF="http://www.openwall.com/lists/musl/">musl</A>&nbsp;
<A HREF="http://www.openwall.com/lists/sabotage/">sabotage</A>&nbsp;
<A HREF="http://www.openwall.com/lists/tlsify/">tlsify</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwords/">passwords</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/crypt-dev/">crypt-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/xvendor/">xvendor</A>&nbsp;
/&nbsp;
<A HREF="/bugtraq/">Bugtraq</A>&nbsp;
<A HREF="/full-disclosure/">Full-Disclosure</A>&nbsp;
<A HREF="/linux-kernel/">linux-kernel</A>&nbsp;
linux-<A HREF="/netdev/">netdev</A>&nbsp;
<A HREF="/linux-ext4/">linux-ext4</A>&nbsp;
<a href="/linux-hardening/">linux-hardening</a>&nbsp;
<a href="/linux-cve-announce/">linux-cve-announce</a>&nbsp;
<a href="/phc-discussions/">PHC</a>&nbsp;
<TR><TD>
<DIV><FONT SIZE="-2"><I>Open Source and information security mailing list archives</I></FONT></DIV>
<TR><TD>&nbsp;
</TABLE>

<TABLE bgcolor="#B4D0DC" width="100%" border="0" cellspacing="0" cellpadding="1">
<TR><TD>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2">
<TR><TD bgcolor="#ECF8FF">

<a href="https://hashsuite.openwall.net/android">
Hash Suite for Android: free password hash cracker in your pocket</a>


</TABLE>
</TABLE>


<a href="4">[&lt;prev]</a> <a href="../../../2015/05/12/1">[next&gt;]</a> <a href="3">[&lt;thread-prev]</a> <a href=".">[day]</a> <a href="..">[month]</a> <a href="../..">[year]</a> <a href="../../..">[list]</a>
<pre style="white-space: pre-wrap">
Message-ID: &lt;20150508231230.GA26640&#64;openwall.com&gt;
Date: Sat, 9 May 2015 02:12:31 +0300
From: Solar Designer &lt;solar&#64;...nwall.com&gt;
To: discussions&#64;...sword-hashing.net
Subject: Re: [PHC] GPU benchmarks: Lyra2+yescrypt (was: Another PHC candidates "mechanical" tests (ROUND2))

On Fri, May 08, 2015 at 07:08:18PM -0300, Marcos Simplicio wrote:
&gt; I also discussed that in another thread: our numbers are way closer to
&gt; those obtained by Milan than yours are (again, this does not mean any of
&gt; them are wrong, since the platforms are different). Hence, while you
&gt; have all the right to take our numbers with skepticism, they are not as
&gt; strange as you suggested.

Yes.  I now primarily blame mmap()/munmap().

&gt; Anyway, the CPU and GPU tests are independent, so the comparisons
&gt; suggested in the third column of our figures can be updated simply by
&gt; dividing new/our CPU numbers by new/our GPU numbers for any algorithm
&gt; having a GPU implementation.

Right.

&gt; &gt; I think you actually used a different metric on CPU, per
&gt; &gt; readme_attacks.txt:
&gt; &gt; 
&gt; &gt; "The CPU benchmarks focused in legitm usage of the kdfs.
&gt; &gt; 
&gt; &gt;     To obtain the medium execution time:
&gt; &gt;     - We executed "n" times each derivation;
&gt; &gt;     - With the parameters seted accordingly with parallelism and memory
&gt; &gt; usage desired."
&gt; &gt; 
&gt; &gt; While this would make sense for KDF use at large m_cost, it doesn't for
&gt; &gt; password hashing use at low m_cost.  You should use a throughput figure
&gt; &gt; for CPU, just like you do for GPU.
&gt; 
&gt; Like Milan Broz's tests, I imagine, which makes perfect sense. We will
&gt; use the exact same methodology for p=1 (as done already) to 12.

Yes, as long as by p you mean not yescrypt's p, but parallelism added
external to yescrypt, like I believe Milan did for Figure 10.

&gt; &gt; I'd make sense to include bcrypt, too.  Especially if you claim that
&gt; &gt; your GPU outperforms CPU at yescrypt despite of pwxform's rapid random
&gt; &gt; lookups, it becomes extremely relevant that you show the same for
&gt; &gt; bcrypt, because yescrypt-simd's rapid random lookups are on par with
&gt; &gt; bcrypt's when both are run defensively on a modern x86 CPU.
&gt; 
&gt; That makes sense, and can be added to our TODO list and eventual
&gt; academic publication (thank you for the advice!).

I'd be interested in your results (and you're welcome!)

&gt; &gt;&gt; The only situation in which we got Lyra2 running faster on our GPU than
&gt; &gt;&gt; on our CPU was for p=1 and 8 threads per warp (for 256KB).
&gt; &gt; 
&gt; &gt; You mean when you used unoptimal settings on GPU and didn't fully use
&gt; &gt; the CPU?  This doesn't count, for either or both of these reasons.
&gt; 
&gt; It is actually:
&gt; 
&gt; 1) Optimal settings for GPU: the setting with highest throughput

OK, I misunderstood you.

&gt; 2) One possible setting for CPU: it corresponds to a a constrained
&gt; device that cannot afford GiBs of memory in their KDF operation, or to
&gt; lightly loaded server (e.g., it cannot afford to use a lot of memory
&gt; because it was designed for peak usage much higher than the current one,
&gt; or because other tasks consume a lot of memory and, thus, the
&gt; authentication processes should not get too much memory).

I agree about the memory, but I disagree that the server wouldn't run
max number of p=1 instances at once if there's enough load.  And if the
server is lightly loaded (as you say), then it's not a scenario that
limits the admin's choice of m_cost and t_cost, so irrelevant to us.
Also, I think CPU vs. GPU comparisons should be per chip, and not e.g.
1 core vs. 1 chip.

&gt; So, I would say it does count, but also that there is also a wider
&gt; picture that would be interesting to explore (="highly loaded server"),
&gt; much like done in Milan Broz's Figure 10.

I think this wider picture is the primary or even the only relevant case
for this range of m_cost.

Indeed, a server will usually not be highly loaded, but the cost
settings are determined by server capacity at max load.

&gt; &gt; I am sorry that my messages might sound dismissive.  Once again, I
&gt; &gt; appreciate your work on this a lot, and I think you got very close to
&gt; &gt; producing valuable results here.
&gt; 
&gt; I respectfully disagree that we have no valuable results yet, for the
&gt; reasons mentioned above and in the previous e-mail. However, we do
&gt; prefer constructive criticism (as you provided!) to plain acceptance,
&gt; since this will help to improve this study.

Given the discussion so far, I am starting to see some value in your
results.  It is just not apparent.  The biggest help so far is making me
benchmark just how much slower mmap()/munmap() are than malloc()/free()
when repeatedly invoked from the same process.  Now this sounds obvious,
but without this discussion maybe I wouldn't realize that Milan's
results are also badly impacted by this.  I previously thought this
overhead would be roughly the same for all schemes, but it actually
varies a lot between implementations.

&gt; Hence, there is absolutely no need to apologize: quite the opposite,
&gt; even though we do not agree with every point you raised, we are very
&gt; thankful for the feedback! It will probably save us a lot of work
&gt; responding to peer reviewers in the future :)

I appreciate how you're responding to feedback, on this and on other
occasions.  Thank you!

Alexander
</pre>
<p><a href="https://www.openwall.com/blists/">Powered by blists</a> - <a href="https://lists.openwall.net">more mailing lists</a>


<p>




</body>
</html>
