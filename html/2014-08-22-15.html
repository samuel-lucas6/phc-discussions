<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">
body { font-size: 16px; }
.cal_brief { text-align: center; }
.cal_brief td:first-child { background: inherit; }
.cal_brief td { background: #ccc; width: 5ex; padding: 2px; }
.cal_big { text-align: center; padding: 0; margin: 0; }
.cal_big td { padding: 0 2px; }
.cal_mon { text-align: center; }
.cal_mon th { font-size: small; padding: 0; margin: 0; }
.cal_mon td { background: #ccc; width: 5ex; height: 1.5em;
	padding: 2px; text-align: right; }
.cal_mon td[colspan] { background: inherit; }
.cal_mon sup { color: #F0F0F0; text-align: left; float: left;
	margin-top: -2pt; font-weight: bold; }
.cal_mon a { text-align: right; margin-left: -4em; float: right; }
</style>

<title>phc-discussions - Re: [PHC] Tradeoff cryptanalysis of password hashing schemes</title>


</head>

<BODY bgcolor="#E0E0E0" text="black" link="blue" alink="red" vlink="navy">



<TABLE bgcolor="white" width="100%" border="0" cellspacing="0" cellpadding="0">
<TR>
<TD width="39%">
<A HREF="http://lists.openwall.net">lists.openwall.net</A>
<TD width="1%" rowspan="3">&nbsp;
<TD width="60%" align="right" rowspan="3">
<A HREF="/">lists</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/announce/">announce</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-users/">owl-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/owl-dev/">owl-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-users/">john-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/john-dev/">john-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwdqc-users/">passwdqc-users</A>&nbsp;
<A HREF="http://www.openwall.com/lists/yescrypt/">yescrypt</A>&nbsp;
<A HREF="http://www.openwall.com/lists/popa3d-users/">popa3d-users</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/oss-security/">oss-security</A>&nbsp;
<A HREF="http://www.openwall.com/lists/kernel-hardening/">kernel-hardening</A>&nbsp;
<A HREF="http://www.openwall.com/lists/musl/">musl</A>&nbsp;
<A HREF="http://www.openwall.com/lists/sabotage/">sabotage</A>&nbsp;
<A HREF="http://www.openwall.com/lists/tlsify/">tlsify</A>&nbsp;
<A HREF="http://www.openwall.com/lists/passwords/">passwords</A>&nbsp;
/&nbsp;
<A HREF="http://www.openwall.com/lists/crypt-dev/">crypt-dev</A>&nbsp;
<A HREF="http://www.openwall.com/lists/xvendor/">xvendor</A>&nbsp;
/&nbsp;
<A HREF="/bugtraq/">Bugtraq</A>&nbsp;
<A HREF="/full-disclosure/">Full-Disclosure</A>&nbsp;
<A HREF="/linux-kernel/">linux-kernel</A>&nbsp;
linux-<A HREF="/netdev/">netdev</A>&nbsp;
<A HREF="/linux-ext4/">linux-ext4</A>&nbsp;
<a href="/linux-hardening/">linux-hardening</a>&nbsp;
<a href="/linux-cve-announce/">linux-cve-announce</a>&nbsp;
<a href="/phc-discussions/">PHC</a>&nbsp;
<TR><TD>
<DIV><FONT SIZE="-2"><I>Open Source and information security mailing list archives</I></FONT></DIV>
<TR><TD>&nbsp;
</TABLE>

<TABLE bgcolor="#B4D0DC" width="100%" border="0" cellspacing="0" cellpadding="1">
<TR><TD>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2">
<TR><TD bgcolor="#ECF8FF">

<a href="https://hashsuite.openwall.net/android">
Hash Suite for Android: free password hash cracker in your pocket</a>


</TABLE>
</TABLE>


<a href="14">[&lt;prev]</a> <a href="../../../2014/08/23/1">[next&gt;]</a> <a href="10">[&lt;thread-prev]</a> <a href="../../../2014/08/23/2">[thread-next&gt;]</a> <a href=".">[day]</a> <a href="..">[month]</a> <a href="../..">[year]</a> <a href="../../..">[list]</a>
<pre style="white-space: pre-wrap">
Message-ID: &lt;CALW8-7KaNOXYFcDpEJ50dbeKN2R81+6V3Omdzw2qjSkB1uFH2Q&#64;mail.gmail.com&gt;
Date: Sat, 23 Aug 2014 01:31:34 +0400
From: Dmitry Khovratovich &lt;khovratovich&#64;...il.com&gt;
To: "discussions&#64;...sword-hashing.net" &lt;discussions&#64;...sword-hashing.net&gt;
Subject: Re: [PHC] Tradeoff cryptanalysis of password hashing schemes

Hi Alexander,


On Fri, Aug 22, 2014 at 6:31 PM, Solar Designer &lt;solar&#64;...nwall.com&gt; wrote:

&gt; Hi Dmitry,
&gt;
&gt; On Wed, Aug 06, 2014 at 10:31:25AM -0700, Dmitry Khovratovich wrote:
&gt; &gt; here is the link to the slides of the talk I have just given at
&gt; &gt; PasswordsCon'14. It investigates time-memory tradeoffs for PHC candidates
&gt; &gt; Catena, Lyra2, and Argon, and estimates the energy cost per password on
&gt; an
&gt; &gt; optimal ASIC implementation with full or reduced memory.
&gt; &gt;
&gt; &gt; <a href="https://www.cryptolux.org/images/5/57/Tradeoffs.pdf" rel="nofollow">https://www.cryptolux.org/images/5/57/Tradeoffs.pdf</a>
&gt;
&gt; This is very nice analysis.  Thank you!
&gt;
&gt; How would you summarize the reasons why Lyra2 T=1 appears to hold up
&gt; better than Catena-3 and -4 against computation in less memory?


The main reason is that the stack of bit-reversal permutations used in
Catena is a weak construction. Regarding memory-hardness, it is barely
better than a
single layer of a bit-reversal permutation. Lyra2 is more resilient against
tradeoff attacks due to its data-depending, pseudo-random addressing in the
Wandering phase. The data-independent Setup phase of Lyra2 is as weak as
Catena.

This is not a surprise. It is really difficult to design a memory-hard
function with data-independent addressing. When multiple cores and memory
banks are available, many theoretical constructions fall apart
*(<a href="http://eprint.iacr.org/2014/238.pdf" rel="nofollow">http://eprint.iacr.org/2014/238.pdf</a>
&lt;<a href="http://eprint.iacr.org/2014/238.pdf" rel="nofollow">http://eprint.iacr.org/2014/238.pdf</a>&gt; )*. I have only started exploring the
other cache-timing resistant designs, but my guess is that they all have
similar problems.

One more reason is that the simplicity of Catena allowed me to understand
it properly and make a better analysis. In case of Lyra2 I had to analyze
its two phases separately and thus spend less time on each, making the
entire analysis more superficial.


&gt;   Is it
&gt; primarily Lyra2 making more memory accesses per iteration (and thus more
&gt; of them total, at these settings, right?) or is Lyra2's simple reverse
&gt; order working better than Catena's bit reversal order, or both, or is
&gt; some other factor more important than these two?  (Yes, I didn't look
&gt; into your attacks closely.  Sorry.)
&gt;

No, both reverse and bit-reverse orders are weak. Lyra2 with just many
iterations of the Setup phase would have the same attack (if not better) as
Catena-T.


&gt;
&gt; You appear to be focusing on relative slowdown at fractions of the full
&gt; memory usage, as well as on finding optimal tradeoff points in terms of
&gt; energy consumption per password tested.  While these results are highly
&gt; desirable to have, maybe even more important is cost per password tested
&gt; (e.g. also in terms of energy consumption) for the different PHC
&gt; candidates being compared when they're tuned for the same defensive
&gt; request rate capacity (on commodity server hardware)?  Indeed, you'd
&gt; need to estimate such costs at the candidates' respective optimal
&gt; tradeoff points.
&gt;

I somewhat agree. We would definitely make this next step if we had a
reference platform where all candidates have been benchmarked. Then yes, we
could set a bound of say 0.5 sec and choose the maximum memory parameter
that allows to compute the hash securely within this time. Although I am
not sure if all candidates support this way of choosing the memory
parameter.

On the other hand, in the cryptographic competitions the security analysis
is not usually coupled with performance. If a designer suggests 40 rounds,
claim it secure, and afterwards a 39-round version gets broken, then the
scheme is dead even if it is so fast that the number of rounds can be
doubled with no problem. The reason is that it is designer's job to choose
secure-and-fast set of parameters, not of cryptanalyst. The same here: if a
function is claimed to be memory-hard, and it is not (i.e. reducing the
memory does not increase the cost), then it has problems no matter how fast
it is.


&gt;
&gt; Suppose you'd optimally attack Catena-3 at 1/32 memory, and Lyra2 and
&gt; Argon at full memory.  However, if Catena-3 at same defensive memory
&gt; cost setting is e.g. twice faster than Lyra2 and Argon (an arbitrary
&gt; number for the sake of illustrating my point), then this may enable a
&gt; defender to use roughly twice more memory with Catena-3 to achieve the
&gt; same (maximum affordable) time cost per hash computed.  Once Catena-3 is
&gt; tuned like that, its non-tradeoff area-time cost probably grows by a
&gt; factor of 4, meaning that it loses to Lyra2 and Argon only by a factor
&gt; of 8, not 32 as this could have originally appeared.  In some other
&gt; scenario (e.g. with other PHC candidates, or if the 2x speed difference
&gt; is actually an under-estimate), this might affect the rankings of PHC
&gt; candidates as it relates to practical relevance of their susceptibility
&gt; to TMTO.  Do you agree?
&gt;
&gt; Isn't Argon significantly slower than both Catena-3 and Lyra2 T=1?
&gt;

It seems that Argon is twice as slow as Lyra2 with T=1, and Catena-3 is
much slower than both.



&gt; If so, it'd probably lose to Lyra2 when we consider actual attack costs
&gt; for same defense costs, rather than relative slowdowns with tradeoffs.
&gt; Is this your understanding too?
&gt;

No, I have a different feeling. Argon's ASIC implementation quickly
increases in latency when the memory is reduced, e.g. by the factor of 6
when using 1/2 of memory, whereas in Lyra2 latency remains almost the same
till the reduction of 1/5 or so. This means that if the energy consumption
is dominated by the memory usage (which easy to imagine in models slightly
different from ours), then Lyra2 will be executed faster and hence take
less energy.

I'd emphasize here that our energy numbers for Blake implementations are
far less precise than that of memory, because Blake2b simply has not been
implemented in hardware yet.


&gt;
&gt; &gt; Additional comment: It is a standard practice in the crypto community to
&gt; &gt; give explicit security claims for the recommended parameter sets so that
&gt; &gt; cryptanalysts could easily identify the primary targets. Many PHC
&gt; &gt; candidates do not follow this rule by not only missing these claims but
&gt; &gt; also concealing the recommended parameters. As a result, cryptanalysts
&gt; like
&gt; &gt; me spend valuable time attacking wrong sets or spreading the attention
&gt; over
&gt; &gt; multiple targets.
&gt; &gt;
&gt; &gt; Remember: third-party cryptanalysis increases the confidence in your
&gt; &gt; design, not decreases it (unless it is badly broken). Analysis of a
&gt; 5%-part
&gt; &gt; of your submission (one of 20 possible parameter sets) is little better
&gt; &gt; than no analysis at all. It is also worth mentioning that to make fair
&gt; &gt; comparison of candidates, benchmarks and performance discussion in
&gt; general
&gt; &gt; should cover recommended parameter sets only.
&gt;
&gt; I agree.  yescrypt tries to achieve adequate security for whatever time
&gt; and memory costs are given to it, across a very wide range of possible
&gt; settings (ranging from kilobytes for RAM, to terabytes for RAM+ROM).
&gt; However, I think we want to focus on the following parameter sets when
&gt; evaluating yescrypt vs. other candidates:
&gt;

Thank you for the explicit parameter values!

&gt;
&gt; Common defaults for all tests:
&gt; p=1 (no internal thread-level parallelism)
&gt; t=0 (lowest running time for a given memory usage)
&gt; mask=1 (every other read is from ROM, if available)
&gt; YESCRYPT_RW and YESCRYPT_PWXFORM flags are set
&gt; YESCRYPT_PARALLEL_SMIX flag does not matter (is no-op when p=1)
&gt;
&gt; RAM only tests:
&gt;
&gt; 1. r=8 N=2048
&gt; (2 MiB, request rate ~10k/s on a 16-core server)
&gt;
&gt; 2. r=8 N=16384
&gt; (16 MiB, request rate ~1k/s on a 16-core server)
&gt;
&gt; 3. r=8 N=1048576
&gt; (1 GiB, KDF use)
&gt;
&gt; 4. r=8 N=1048576 p=(a multiple of logical CPU count)
&gt; YESCRYPT_PARALLEL_SMIX set
&gt; (1 GiB, KDF use, multi-threaded)
&gt;
&gt; RAM+ROM tests:
&gt;
&gt; 5. r=7 N=2048 NROM=134217728
&gt; (1.75 MiB RAM, 112 GiB ROM, request rate ~10k/s on a 16-core server)
&gt;
&gt; 6. r=7 N=16384 NROM=134217728
&gt; (14 MiB RAM, 112 GiB ROM, request rate ~1k/s on a 16-core server)
&gt;
&gt; You may adjust NROM to fit your hardware, and/or we may provide access
&gt; to our machine.  At least for the tests with ROM, the system should have
&gt; enough "huge pages" allocated and available to the user account, as
&gt; shown here:
&gt; <a href="http://www.openwall.com/presentations/PHDays2014-Yescrypt/mgp00014.html">http://www.openwall.com/presentations/PHDays2014-Yescrypt/mgp00014.html</a>
&gt;
&gt; Please note that yescrypt's TMTO resistance grows with higher t.  At t=0
&gt; it is meant to be adequate, but not excessive.  Optimal t doesn't
&gt; necessarily correspond to "full memory" being the optimal attack point.
&gt; I think our actual goal should be different, as I tried to explain above -
&gt; namely, maximizing attack costs in absolute terms, for same defense
&gt; costs.  And t is part of the defense costs, so it should be kept as low
&gt; as practical.
&gt;
&gt; If you analyze yescrypt and conclude that optimal attack/defense cost
&gt; ratio is achieved at some t &gt; 0, then this may be a reason to recommend
&gt; such higher t for yescrypt going forward.  For now, I'd like to give t=0
&gt; a try.
&gt;
&gt; Thanks again,
&gt;
&gt; Alexander
&gt;



-- 
Best regards,
Dmitry Khovratovich

<span style="font-family: times;"><strong>Content of type "</strong>text/html<strong>" skipped</strong></span>
</pre>
<p><a href="https://www.openwall.com/blists/">Powered by blists</a> - <a href="https://lists.openwall.net">more mailing lists</a>


<p>




</body>
</html>
